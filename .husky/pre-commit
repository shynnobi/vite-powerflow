#!/bin/sh

echo "ğŸ” Augmenting changesets (anchor/baseline) ..."
pnpm changeset:augment
if [ $? -ne 0 ]; then
  echo "âŒ Changeset augmentation failed. Commit aborted to ensure sync integrity."
  exit 1
fi

# Re-stage potential changes to .changeset/*.md made by the augment script
git add .changeset/*.md 2>/dev/null || true

echo "ğŸ” Validating your commit..."

pnpm validate:commit || {
  echo "âŒ Validation failed. Please fix the issues above."
  exit 1
}

echo "âœ… All checks passed! Committing..."
